{% extends "base.html" %}
{% block content %}
{% load app_filters %}
<div class="row">
  <div class="col-sm-12">
    <table id="industry" class="table-sm cell-border" style="width:100%">
      <thead>
        <tr>
          <th class="p-0">Industry</th>
          <th class="p-0">Produces</th>
          {% for stock in industry_headers %}
          <th>
            {{ stock.commodity_FK.name}}
          </th>
          <th> 
            Required
          </th>
          {% endfor %}
          <th>Sales Stocks</th>
          <th>Money Stocks</th>
          <th class="p-0">Scale</th>
        </tr>
      </thead>
      <tbody>
        {% for industry in industries %}
        <tr>
          <td>{{ industry.name }}</td>
          <td>{{ industry.commodity_FK.name }}</td>
          {% for stock in productive_stocks %}
          {% if stock.industry_FK.name == industry.name %}
          <td>
            {{ stock.size|has_changed:stock.old_size}}
          </td>
          <td>
            {{ stock.production_requirement}}
          </td>
          {% endif %}
          {% endfor %}
          <td> {{ industry.industrystock_set.all|sales_filter}} </td>
          <td> {{ industry.industrystock_set.all|money_filter }} </td>      
          <td>{{ industry.output_scale }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <table id="social-class" class="table-sm cell-border" style="width:100%">
      <thead>
        <tr>
          <th >Social Class</th>
          <th >Population</th>
          <th >Labour Power</th>
          <th >Consumption Goods</th>
          <th >Money</th>
          <th >Consumption Ratio</th>
          <th >Revenue</th>
          <th >Assets</th>
        </tr>
      </thead>
      <tbody>
        {% for social_class in social_classes %}
        <tr>
          <td >{{social_class.name}}</td>
          <td >{{social_class.population}}</td>
          <td> {{ social_class.class_stock.all|sales_filter }}</td>
          <td> {{ social_class.class_stock.all|consumption_filter }}</td>
          <td> {{ social_class.class_stock.all|money_filter }}</td>
          <td> {{social_class.consumption_ratio}}</td>
          <td >{{social_class.revenue}}</td>
          <td >{{social_class.assets}}</td>
         
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <table id="commodities" class="table-sm cell-border" style="width:100%">
      <thead>
        <tr>
          <th >Time Stamp</th>
          <th >Commodity</th>
          <th >Turnover Time</th>
          <th >Demand</th>
          <th >Supply</th>
        </tr>
      </thead>
      <tbody>
        {% for commodity in commodities %}
        <tr>
          <td >{{commodity.time_stamp_FK}}</td>
          <td >{{commodity.name }}</td>
          <td> {{commodity.turnover_time }}</td>
          <td >{{commodity.demand }}</td>
          <td >{{commodity.demand }}</td> 
          <!-- MEMO ADD SUPPLY FIELD -->
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>



<script src="//code.jquery.com/jquery-1.12.4.js"></script>
<script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="//cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
<script>
  $(document).ready(function () {
    $('#industry').DataTable(
      {
        "paging": false,
        "searching": false,
        "info": false
      }
    );
  });
</script>

<script>
  $(document).ready(function () {
    $('#social-class').DataTable(
      {
        "paging": false,
        "searching": false,
        "info": false
      }
    );
  });
</script>


<script>
  $(document).ready(function () {
    $('#commodities').DataTable(
      {
        "paging": false,
        "searching": false,
        "info": false
      }
    );
  });
</script>

{% endblock %}